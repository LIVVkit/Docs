<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Design &mdash; LIVVKit 2.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="LIVVKit 2.0.0 documentation" href="index.html" />
    <link rel="next" title="API Documentation" href="Usage.html" />
    <link rel="prev" title="Philosophy" href="Philosophy.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <a class="reference internal image-reference" href="_images/livvkit.png"><img alt="LIVVkit" class="align-center" src="_images/livvkit.png" style="width: 400px;" /></a>
<div class="section" id="design">
<h1>Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h1>
<div class="section" id="repository-layout">
<h2>Repository Layout<a class="headerlink" href="#repository-layout" title="Permalink to this headline">¶</a></h2>
<p>LIVVkit is designed to be as generic as possible, with an emphasis on providing basic
infrastructure for performing V&amp;V on models.  As a result LIVVkit&#8217;s source code is broken into three
conceptual pieces:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Components</strong>: Provides modules for the four cases of analysis.  Numeric verification and model
validation contain separate test subdirectories for including specific pieces of analysis.</li>
<li><strong>Bundles</strong>: Provides model specific implementations of various functions used in the standard
analysis sets.  Also provides the definitions for which sets of analysis should be run for each
specific model.</li>
<li><strong>Utilities</strong>: Provides extra functionality that falls outside of the V&amp;V paradigm.  This
includes classes and functions for accessing common data types, the rutime infrastructure (known
as the scheduler), and modules that facilitate IO.</li>
</ul>
</div></blockquote>
<p>In addition to these pieces LIVVkit provides some reference datasets used in included analyses and
infrastructure for rendering output in the web browser.</p>
</div>
<div class="section" id="model-output-livvkit-input-hierarchy">
<h2>Model Output/LIVVkit Input Hierarchy<a class="headerlink" href="#model-output-livvkit-input-hierarchy" title="Permalink to this headline">¶</a></h2>
<p>LIVVkit&#8217;s analysis are performed by finding files in a somewhat rigid structure.  The directory
layout of the model output should be as follows:</p>
<div class="code Python highlight-default"><div class="highlight"><pre><span></span>MODEL-Variant
    ├── metadata-etc
    └── run_name
        └── variant_name
            ├── size_1
            │   ├── processor_count_1
            │   └── processor_count_2
            └── size_2
                └── processor_count_n
</pre></div>
</div>
</div>
<div class="section" id="extending-components">
<h2>Extending Components<a class="headerlink" href="#extending-components" title="Permalink to this headline">¶</a></h2>
<div class="section" id="including-new-models">
<h3>Including New Models<a class="headerlink" href="#including-new-models" title="Permalink to this headline">¶</a></h3>
<p>Adding new models requires a new implementation in the <code class="docutils literal"><span class="pre">bundles</span></code> directory.  Within the
<code class="docutils literal"><span class="pre">bundles</span></code> directory there should be a <code class="docutils literal"><span class="pre">template</span></code> directory that can be copied over when adding
compatibility for a new model.  It provides sample modules with function stubs that can be filled in
to provide a drop in way to use each component (verification, performance, numerics, and
validation).  These functions primarily are used to accomodate for model-specific implementations of things such
as parsing log files, assimilating timing data, and arranging data onto standard grids.</p>
<p>In addition to implementing component specific modules, each bundle must provide component level
configuration files to provide information about which test cases are run, file and variable naming
schemes, and data locations.</p>
<p>When the new bundle has been implemented and placed in the <code class="docutils literal"><span class="pre">bundles</span></code> directory it will
automatically be registered by LIVVkit at runtime. It is important to note that in order to use
LIVVkit on a new model it will also have to conform to the standards described in the
<strong>Model Output/LIVVkit Input Hierarchy</strong> section (above).  It is critial that the <code class="docutils literal"><span class="pre">MODEL-Variant</span></code>
directory name is the same as the directory name that you have implemented in <code class="docutils literal"><span class="pre">bundles</span></code>.</p>
</div>
<div class="section" id="adding-tests-to-numerics-or-validation">
<h3>Adding Tests to Numerics or Validation<a class="headerlink" href="#adding-tests-to-numerics-or-validation" title="Permalink to this headline">¶</a></h3>
<p>Inevitably the standard provided test cases provided by LIVVkit will not fit the needs of new
scientific questions.  With this in mind, it is possible to add new sets of analyses into LIVVkit.
We limit these new tests to the numerics and validation components, although they can be any Python
code in principle.</p>
<p>Like the implementation of new bundles we provide templates for each class of test that can be used
to extend LIVVkit to your analysis.  A new test consists of a configuration file and a Python module
that implements the <code class="docutils literal"><span class="pre">run</span></code> method that takes a string and a dictionary as inputs.  These refer to
the name of the test and the data extracted from the configuration file, respectively.</p>
<p>Within the configuration file there is a required entry pointing to the module that contains the
<code class="docutils literal"><span class="pre">run</span></code> method described above.  It should be entered as you would import it from within Python
itself.  In principle you can add the location of your module to your <code class="docutils literal"><span class="pre">PYTHONPATH</span></code>, but the
reccommended method of including new analyses into LIVVkit is to either put them in the
<code class="docutils literal"><span class="pre">components/validation_tests</span></code> or <code class="docutils literal"><span class="pre">components/numerics_tests</span></code> or create a symlink to those
locations.</p>
<p>When the analysis has been wrapped into these two files it can be run from the command line by
providing the <code class="docutils literal"><span class="pre">--validation</span></code> argument followed by the path to the configuration file.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Design</a><ul>
<li><a class="reference internal" href="#repository-layout">Repository Layout</a></li>
<li><a class="reference internal" href="#model-output-livvkit-input-hierarchy">Model Output/LIVVkit Input Hierarchy</a></li>
<li><a class="reference internal" href="#extending-components">Extending Components</a><ul>
<li><a class="reference internal" href="#including-new-models">Including New Models</a></li>
<li><a class="reference internal" href="#adding-tests-to-numerics-or-validation">Adding Tests to Numerics or Validation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="Philosophy.html" title="previous chapter">Philosophy</a></li>
      <li>Next: <a href="Usage.html" title="next chapter">API Documentation</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/Design.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Katherine Evans, Joseph Kennedy, Andrew Bennett.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="_sources/Design.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>